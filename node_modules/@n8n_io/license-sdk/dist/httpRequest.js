"use strict";var p=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var f=Object.prototype.hasOwnProperty;var d=(t,s)=>{for(var e in s)p(t,e,{get:s[e],enumerable:!0})},l=(t,s,e,n)=>{if(s&&typeof s=="object"||typeof s=="function")for(let r of x(s))!f.call(t,r)&&r!==e&&p(t,r,{get:()=>s[r],enumerable:!(n=u(s,r))||n.enumerable});return t};var m=t=>l(p({},"__esModule",{value:!0}),t);var S={};d(S,{default:()=>I,postRequest:()=>g});module.exports=m(S);var o=require("undici"),y=require("url");var c="2.19.0";function i(t){let s=process.env[t];return s?new o.ProxyAgent(s):null}var a=i("http_proxy_license_server")||i("http_proxy"),h=i("https_proxy_license_server")||i("https_proxy"),_={...a?{"http:":a}:{},...h?{"https:":h}:{}},w=(process.env.no_proxy??"").split(",").map(t=>t.trim()),D=(0,o.getGlobalDispatcher)();(0,o.setGlobalDispatcher)(new class extends o.Dispatcher{dispatch(t,s){if(t.origin){let{host:e,protocol:n}=typeof t.origin=="string"?new y.URL(t.origin):t.origin;if(!w.some(r=>r.startsWith(".")?e.endsWith(r):e===r)){let r=_[n];r&&r.dispatch(t,s)}}return D.dispatch(t,s)}});async function g(t,s,e={}){try{let n=await(0,o.fetch)(t,{method:"post",body:JSON.stringify(s),headers:{"Content-Type":"application/json","User-Agent":`License-SDK/${c} (Node.js ${process.version}; ${process.platform}) ${e.productIdentifier}`},signal:AbortSignal.timeout(e.timeoutInMs??3e4)}),r=await n.json();return{status:n.status,data:r}}catch(n){throw new Error("Connection Error",{cause:n})}}var I={postRequest:g};0&&(module.exports={postRequest});
//# sourceMappingURL=httpRequest.js.map